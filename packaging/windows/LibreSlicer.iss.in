; LibreSlicer installer (templated)
; Generated by CMake -> configure_file with @APP_VERSION@ and @OUTPUT_BASENAME@

#define MyAppName       "LibreSlicer"
#define MyAppPublisher  "Mythic Reliquary LLC"
#define MyAppVersion    "@APP_VERSION@"
#define MyAppExeName    "LibreSlicer.exe"
#define MyOutputBase    "@OUTPUT_BASENAME@"   ; e.g. LibreSlicer-Setup-1.0.0+100
; Optional: set path to .ico if you have one
;#define MyAppIcon     "..\\..\\branding\\libreslicer.ico"

[Setup]
AppId={{1E7C2B8E-3E57-4B1B-9A5C-5C3D0F7FAE21}      ; new GUID OK to keep
AppName={#MyAppName}
AppVersion={#MyAppVersion}
AppPublisher={#MyAppPublisher}
DefaultDirName={pf}\LibreSlicer
DefaultGroupName=LibreSlicer
OutputBaseFilename={#MyOutputBase}
Compression=lzma
SolidCompression=yes
DisableDirPage=no
DisableProgramGroupPage=yes
ArchitecturesInstallIn64BitMode=x64
LicenseFile=..\..\LICENSE
WizardStyle=modern
UninstallDisplayIcon={app}\{#MyAppExeName}
; Uncomment if you have an icon
;SetupIconFile={#MyAppIcon}

; -------- Optional code signing: comment these if you don't sign ----------
;SignTool=mysigntool
;[SignTool]
;Name: "mysigntool"; Command: "signtool sign /tr http://timestamp.digicert.com /td sha256 /fd sha256 /a $f"

[Languages]
Name: "en"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "Create a &desktop icon"; GroupDescription: "Additional icons:"

[Files]
; Adjust if your binary output differs; this assumes Ninja single-config Release in build\win64
Source: "..\..\build\win64\LibreSlicer.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "..\..\SOURCE_OFFER.md"; DestDir: "{app}"
Source: "..\..\THIRD_PARTY_NOTICES.txt"; DestDir: "{app}"
Source: "..\..\CREDITS.md"; DestDir: "{app}"
Source: "..\..\LICENSE"; DestDir: "{app}"
Source: "..\..\resources\*"; DestDir: "{app}\resources"; Flags: recursesubdirs
Source: "..\..\profiles\*";  DestDir: "{app}\profiles";  Flags: recursesubdirs
Source: "..\..\docs\FAQ.md"; DestDir: "{app}"; Flags: ignoreversion; Check: FileExists(ExpandConstant('..\..\docs\FAQ.md'))
Source: "..\..\scripts\post_slice_to_uvtools.bat"; DestDir: "{app}\scripts"; Flags: ignoreversion; Check: FileExists(ExpandConstant('..\..\scripts\post_slice_to_uvtools.bat'))

[Icons]
Name: "{group}\LibreSlicer"; Filename: "{app}\{#MyAppExeName}"
Name: "{commondesktop}\LibreSlicer"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "Launch LibreSlicer"; Flags: nowait postinstall skipifsilent
